{"version":3,"sources":["Timetable.js","index.js"],"names":["Timetable","props","state","data","formatRows","bind","timeslots","result","map","entry","isvalid","console","log","type","push","style","backgroundColor","name","title","code","loc","weeks","this","days","item","day","scope","formatData","role","content","React","Component","App","filterType","filterDays","filter","course","localStorage","getItem","year","semester","JSON","parse","error","changeHandler","event","target","value","setState","setItem","preventDefault","a","url","fetch","then","res","json","items","stringify","catch","e","fetchTimetable","method","className","placeholder","onChange","onClick","submitHandler","length","ReactDOM","render","document","getElementById"],"mappings":"4UAIqBA,G,kBACjB,WAAYC,GAAQ,IAAD,8BACf,4CAAMA,KACDC,MAAQ,CACTC,KAAM,EAAKF,MAAME,MAAQ,IAG7B,EAAKC,WAAa,EAAKA,WAAWC,KAAhB,gBANH,E,wEASRC,GACP,IAAIC,EAAS,GA0Bb,OAzBAD,EAAUE,KAAI,SAACC,GACPA,EAAMC,SACNC,QAAQC,IAAIH,EAAMI,MACC,SAAfJ,EAAMI,KACNN,EAAOO,KACH,wBAAIC,MAAO,CAACC,gBAAgB,WAAYC,KAAMR,EAAMS,OAAQT,EAAMU,KAAK,6BAAOV,EAAMS,MAAM,6BAAOT,EAAMW,IAAI,6BAAOX,EAAMY,QAGxG,UAAfZ,EAAMI,KACXN,EAAOO,KACH,wBAAIC,MAAO,CAACC,gBAAgB,WAAYC,KAAMR,EAAMS,OAAQT,EAAMU,KAAK,6BAAOV,EAAMS,MAAM,6BAAOT,EAAMW,IAAI,6BAAOX,EAAMY,QAI5Hd,EAAOO,KACH,wBAAIC,MAAO,CAACC,gBAAgB,WAAYC,KAAMR,EAAMS,OAAQT,EAAMU,KAAK,6BAAOV,EAAMS,MAAM,6BAAOT,EAAMW,IAAI,6BAAOX,EAAMY,SAKhId,EAAOO,KACH,wBAAIG,KAAK,cAAT,YAILV,I,mCAGG,IAAD,OACLA,EAAS,GAUb,OATAI,QAAQC,IAAIU,KAAKpB,MAAMC,MACvBmB,KAAKrB,MAAME,KAAKoB,KAAKf,KAAI,SAACgB,GACtBjB,EAAOO,KACH,4BACI,wBAAIG,KAAMO,EAAKC,IAAKC,MAAM,OAAOF,EAAKC,KACrC,EAAKE,WAAWH,EAAKlB,gBAI3BC,I,+BAKP,OADCI,QAAQC,IAAIU,KAAKrB,MAAME,KAAM,SAE1B,yBAAKyB,KAAK,SACN,0BAAMX,KAAK,WAAWY,QAAQ,wCAC9B,2BAAOZ,KAAK,aACR,+BACI,4BACI,wBAAIA,KAAK,cAAcS,MAAM,OAA7B,OACA,wBAAIT,KAAK,uBAAuBS,MAAM,OAAtC,SACA,wBAAIT,KAAK,oBAAoBS,MAAM,OAAnC,SACA,wBAAIT,KAAK,sBAAsBS,MAAM,OAArC,SACA,wBAAIT,KAAK,mBAAmBS,MAAM,OAAlC,SACA,wBAAIT,KAAK,yBAAyBS,MAAM,OAAxC,SACA,wBAAIT,KAAK,sBAAsBS,MAAM,OAArC,SACA,wBAAIT,KAAK,yBAAyBS,MAAM,OAAxC,SACA,wBAAIT,KAAK,sBAAsBS,MAAM,OAArC,SACA,wBAAIT,KAAK,sBAAsBS,MAAM,OAArC,SACA,wBAAIT,KAAK,mBAAmBS,MAAM,OAAlC,SACA,wBAAIT,KAAK,sBAAsBS,MAAM,OAArC,SACA,wBAAIT,KAAK,mBAAmBS,MAAM,OAAlC,SACA,wBAAIT,KAAK,wBAAwBS,MAAM,OAAvC,SACA,wBAAIT,KAAK,qBAAqBS,MAAM,OAApC,SACA,wBAAIT,KAAK,uBAAuBS,MAAM,OAAtC,SACA,wBAAIT,KAAK,oBAAoBS,MAAM,OAAnC,SACA,wBAAIT,KAAK,uBAAuBS,MAAM,OAAtC,SACA,wBAAIT,KAAK,oBAAoBS,MAAM,OAAnC,WAGR,+BACKJ,KAAKlB,oB,GApFS0B,IAAMC,YCCvCC,G,kBACF,WAAY/B,GAAQ,IAAD,8BACf,4CAAMA,KAiBVgC,WAAa,SAAC3B,GACV,OAAyB,IAAtBA,EAAUI,SAAiBJ,EAAUO,OAAS,EAAKX,MAAMW,KAAa,CAACH,QAAS,GAC5EJ,GApBQ,EAuBnB4B,WAAa,SAACT,GACV,OAAGA,EAAIA,MAAQ,EAAKvB,MAAMuB,IACf,CAACA,IAAK,GAAInB,UAAW,IAEzBmB,GA3BQ,EA8BnBU,OAAS,SAAChC,GACN,IAAIoB,EAAOpB,EAAKoB,KAShB,OARAZ,QAAQC,IAAIT,GACU,KAAnB,EAAKD,MAAMuB,MACdF,EAAOA,EAAKf,KAAI,SAACiB,GAAD,OAAS,EAAKS,WAAWT,OAClB,KAApB,EAAKvB,MAAMW,OACdU,EAAOA,EAAKf,KAAI,SAACiB,GACb,MAAO,CAAEA,IAAKA,EAAIA,IAAKnB,UAAWmB,EAAInB,UAAUE,KAAI,SAACF,GAAD,OAAe,EAAK2B,WAAW3B,WAGhF,eAAIH,EAAX,CAAiBoB,UAtCjB,EAAKrB,MAAQ,CACTkC,OAAcC,aAAaC,QAAQ,UACnCC,KAAcF,aAAaC,QAAQ,QACnCE,SAAkBH,aAAaC,QAAQ,YACvCnC,KAAMkC,aAAaC,QAAQ,QAAUG,KAAKC,MAAML,aAAaC,QAAQ,SAASnC,KAAO,GACrFU,KAAM,GACNY,IAAK,GACLkB,MAAO,IAGX,EAAKT,WAAa,EAAKA,WAAW7B,KAAhB,gBAClB,EAAK4B,WAAa,EAAKA,WAAW5B,KAAhB,gBAClB,EAAK8B,OAAS,EAAKA,OAAO9B,KAAZ,gBACd,EAAKuC,cAAgB,EAAKA,cAAcvC,KAAnB,gBAfN,E,2EA2CLwC,GACV,IAAI5B,EAAO4B,EAAMC,OAAO7B,KACpB8B,EAAQF,EAAMC,OAAOC,MACzBzB,KAAK0B,SAAL,eAAgB/B,EAAO8B,IACvBV,aAAaY,QAAQhC,EAAM8B,K,oCAGjBF,GAAQ,IAAD,OACjBA,EAAMK,iBAEc,uCAAG,4BAAAC,EAAA,sDACfC,EAAM,wBAA0B,EAAKlD,MAAMkC,OAAS,IAAM,EAAKlC,MAAMqC,KAAO,IAAM,EAAKrC,MAAMsC,SACjGa,MAAMD,GACLE,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAM,SAAAG,GACH,EAAKT,SAAS,CAAE7C,KAAMsD,IACtB,EAAKT,SAAS,CAACL,MAAO,KACtBN,aAAaY,QAAQ,OAAQR,KAAKiB,UAAU,CAACvD,KAAMsD,QAEtDE,OAAM,SAACC,GAAD,OAAO,EAAKZ,SAAS,CAACL,MAAO,2EACpChC,QAAQC,IAAI,EAAKV,MAAMC,MAVJ,2CAAH,oDAapB0D,K,+BAIA,OACI,yBAAKjC,KAAK,QACN,0BAAMX,KAAK,WAAWY,QAAQ,wCAC9B,wBAAIX,MAAM,yBAAV,oBACA,0BAAM4C,OAAO,MAAM7C,KAAK,eACpB,yBAAK8C,UAAU,cACX,4CAEI,2BAAOhB,MAAOzB,KAAKpB,MAAMkC,OAAQvB,KAAK,OAAOI,KAAK,SAAS+C,YAAY,iBAAiBC,SAAU3C,KAAKsB,kBAG/G,yBAAKmB,UAAU,cACX,gDAEI,2BAAOhB,MAAOzB,KAAKpB,MAAMqC,KAAM1B,KAAK,OAAOI,KAAK,OAAO+C,YAAY,OAAOC,SAAU3C,KAAKsB,kBAGjG,yBAAKmB,UAAU,eACX,2CAEI,4BAAQhB,MAAOzB,KAAKpB,MAAMsC,SAAUvB,KAAK,WAAWgD,SAAU3C,KAAKsB,eAC/D,4BAAQG,MAAM,KAAd,KACA,4BAAQA,MAAM,KAAd,QAIZ,yBAAKgB,UAAU,eACX,wCAEI,4BAAQ9C,KAAK,oBAAoBiD,QAAS5C,KAAK6C,cAAc9D,KAAKiB,OAAlE,YAGR,yBAAKyC,UAAU,kBACX,gDAEI,4BAAQ9C,KAAK,MAAMgD,SAAU3C,KAAKsB,eAC9B,4BAAQG,MAAM,GAAG9B,KAAK,aAAtB,QACA,4BAAQ8B,MAAM,MAAM9B,KAAK,iBAAzB,UACA,4BAAQ8B,MAAM,MAAM9B,KAAK,kBAAzB,WACA,4BAAQ8B,MAAM,MAAM9B,KAAK,oBAAzB,aACA,4BAAQ8B,MAAM,MAAM9B,KAAK,mBAAzB,YACA,4BAAQ8B,MAAM,MAAM9B,KAAK,iBAAzB,aAIZ,yBAAK8C,UAAU,kBACX,iDAEI,4BAAQ9C,KAAK,OAAOgD,SAAU3C,KAAKsB,eAC/B,4BAAQG,MAAM,IAAd,QACA,4BAAQA,MAAM,QAAd,WACA,4BAAQA,MAAM,SAAd,aACA,4BAAQA,MAAM,QAAd,gBAMfzB,KAAKpB,MAAMyC,MAAQ,yBAAKf,KAAK,SAAV,WAA2BN,KAAKpB,MAAMyC,OAAe,GAE7C,IAA3BrB,KAAKpB,MAAMC,KAAKiE,OAAe,kBAAC,EAAD,CAAWjE,KAAMmB,KAAKa,OAAOb,KAAKpB,MAAMC,QAAY,GA3DxF,S,GAxEM2B,IAAMC,YAyIxBsC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.42a13d19.chunk.js","sourcesContent":["/* eslint react/prop-types: 0 */\nimport React from 'react';\nimport './Timetable.css';\n\nexport default class Timetable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: this.props.data || []\n        };\n\n        this.formatRows = this.formatRows.bind(this);\n    }\n\n    formatData(timeslots) {\n        let result = [];\n        timeslots.map((entry) => {\n            if (entry.isvalid) {\n                console.log(entry.type)\n                if (entry.type === \"Lec.\") {\n                    result.push(\n                        <td style={{backgroundColor:\"#F92672\"}} name={entry.title}>{entry.code}<br />{entry.title}<br />{entry.loc}<br />{entry.weeks}</td>\n                    )\n                }\n                else if (entry.type === \"Prac.\") {\n                    result.push(\n                        <td style={{backgroundColor:\"#7289da\"}} name={entry.title}>{entry.code}<br />{entry.title}<br />{entry.loc}<br />{entry.weeks}</td>\n                    )\n                }\n                else {\n                    result.push(\n                        <td style={{backgroundColor:\"#FD971F\"}} name={entry.title}>{entry.code}<br />{entry.title}<br />{entry.loc}<br />{entry.weeks}</td>\n                    )\n                }\n            }\n            else {\n                result.push(\n                    <td name=\"blank cell\">&nbsp;</td>\n                );\n            }\n        });\n        return result;\n    }\n\n    formatRows() {\n        let result = []\n        console.log(this.state.data)\n        this.props.data.days.map((item) => {\n            result.push(\n                <tr>\n                    <th name={item.day} scope=\"Row\">{item.day}</th>\n                    {this.formatData(item.timeslots)}\n                </tr>\n            );\n        });\n        return result;\n    }\n\n    render() {\n        {console.log(this.props.data, \"memes\")}\n        return (\n            <div role=\"table\">\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n                <table name=\"timetable\">\n                    <thead>\n                        <tr>\n                            <th name=\"day heading\" scope=\"col\">Day</th>\n                            <th name=\"nine o'clock heading\" scope=\"col\">09:00</th>\n                            <th name=\"half nine heading\" scope=\"col\">09:30</th>\n                            <th name=\"ten o'clock heading\" scope=\"col\">10:00</th>\n                            <th name=\"half ten heading\" scope=\"col\">10:30</th>\n                            <th name=\"eleven o'clock heading\" scope=\"col\">11:00</th>\n                            <th name=\"half eleven heading\" scope=\"col\">11:30</th>\n                            <th name=\"twelve o'clock heading\" scope=\"col\">12:00</th>\n                            <th name=\"half twelve heading\" scope=\"col\">12:30</th>\n                            <th name=\"one o'clock heading\" scope=\"col\">13:00</th>\n                            <th name=\"half one heading\" scope=\"col\">13:30</th>\n                            <th name=\"two o'clock heading\" scope=\"col\">14:00</th>\n                            <th name=\"half two heading\" scope=\"col\">14:30</th>\n                            <th name=\"three o'clock heading\" scope=\"col\">15:00</th>\n                            <th name=\"half three heading\" scope=\"col\">15:30</th>\n                            <th name=\"four o'clock heading\" scope=\"col\">16:00</th>\n                            <th name=\"half four heading\" scope=\"col\">16:30</th>\n                            <th name=\"five o'clock heading\" scope=\"col\">17:00</th>\n                            <th name=\"half five heading\" scope=\"col\">17:30</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {this.formatRows()}\n                    </tbody>\n                </table>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Timetable from './Timetable.js';\nimport './index.css';\n// JSON.parse(localStorage.getItem(\"data\")).data\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            course: '' || localStorage.getItem(\"course\"),\n            year: null || localStorage.getItem(\"year\"),\n            semester: null || localStorage.getItem(\"semester\"),\n            data: localStorage.getItem(\"data\") ? JSON.parse(localStorage.getItem(\"data\")).data : [],\n            type: '',\n            day: '',\n            error: ''\n        };\n\n        this.filterDays = this.filterDays.bind(this);\n        this.filterType = this.filterType.bind(this);\n        this.filter = this.filter.bind(this);\n        this.changeHandler = this.changeHandler.bind(this);\n    }\n\n    filterType = (timeslots) => { //allow users to filter timetable by timetable item type\n        if(timeslots.isvalid === 0 || timeslots.type !== this.state.type) return {isvalid: 0}\n        return timeslots\n    }\n\n    filterDays = (day) => { //allow users to filter timetable by day\n        if(day.day !== this.state.day) {\n            return {day: '', timeslots: []}\n        }\n        return day;\n    }\n\n    filter = (data) => { //allows the previous filtering functions to execute\n        let days = data.days\n        console.log(data)\n        if(this.state.day !== '')\n        days = days.map((day) => this.filterDays(day))\n        if(this.state.type !== '') {\n        days = days.map((day) => {\n            return { day: day.day, timeslots: day.timeslots.map((timeslots) => this.filterType(timeslots))}\n        })\n    }\n        return {...data, days}\n    }\n\n    changeHandler(event) { //take form parameters and store them in state\n        let name = event.target.name;\n        let value = event.target.value;\n        this.setState({[name]: value});\n        localStorage.setItem(name, value);\n    }\n\n    submitHandler(event) { //do something when the user submits the form\n        event.preventDefault();\n            \n        const fetchTimetable = async () => { //get data from the API and store it in state\n            let url = 'http://18.203.138.11/' + this.state.course + '/' + this.state.year + '/' + this.state.semester\n            fetch(url)\n            .then(res => res.json())\n            .then((items => {\n                this.setState({ data: items })\n                this.setState({error: ''})\n                localStorage.setItem(\"data\", JSON.stringify({data: items}))\n            }))\n            .catch((e) =>(this.setState({error: \"Unable to retrieve specified timetable. Check inputs and try again.\"})))\n            console.log(this.state.data)\n        };\n\n        fetchTimetable();\n    }\n\n    render() { //main function for displaying React components\n        return (\n            <div role=\"main\">\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n                <h1 title=\"Search by Course code\">Programme Search</h1>\n                <form method=\"get\" name=\"search form\">\n                    <div className=\"form-field\">\n                        <label>\n                            Programme:\n                            <input value={this.state.course} type=\"text\" name=\"course\" placeholder=\"Programme Code\" onChange={this.changeHandler} />\n                        </label>\n                    </div>\n                    <div className=\"form-field\">\n                        <label>\n                            Year of Study:\n                            <input value={this.state.year} type=\"text\" name=\"year\" placeholder=\"Year\" onChange={this.changeHandler} />\n                        </label>\n                    </div>\n                    <div className=\"form-select\">\n                        <label>\n                            Semester:\n                            <select value={this.state.semester} name=\"semester\" onChange={this.changeHandler} >\n                                <option value=\"1\">1</option>\n                                <option value=\"2\">2</option>\n                            </select>\n                        </label>\n                    </div>\n                    <div className=\"form-submit\">\n                        <label>\n                            Search\n                            <button name=\"Search for course\" onClick={this.submitHandler.bind(this)}>Search</button>\n                        </label>\n                    </div>\n                    <div className=\"form-filtering\">\n                        <label>\n                            Filter by Day:\n                            <select name=\"day\" onChange={this.changeHandler}>\n                                <option value='' name=\"no filter\">None</option>\n                                <option value=\"Mon\" name=\"Monday filter\">Monday</option>\n                                <option value=\"Tue\" name=\"Tuesday filter\">Tuesday</option>\n                                <option value=\"Wed\" name=\"Wednesday filter\">Wednesday</option>\n                                <option value=\"Thu\" name=\"Thursday filter\">Thursday</option>\n                                <option value=\"Fri\" name=\"Friday filter\">Friday</option>\n                            </select>\n                        </label>\n                    </div>\n                    <div className=\"form-filtering\">\n                        <label>\n                            Filter by Type:\n                            <select name=\"type\" onChange={this.changeHandler}>\n                                <option value=''>None</option>\n                                <option value=\"Lec.\">Lecture</option>\n                                <option value=\"Prac.\">Practical</option>\n                                <option value=\"Tut.\">Tutorial</option>\n                            </select>\n                        </label>\n                    </div>\n                </form>\n\n                {this.state.error ? <div role=\"alert\">Error - {this.state.error}</div> : ''}\n                {/* {console.log(JSON.parse(localStorage.getItem(\"data\")).data)} */}\n                {this.state.data.length !== 0 ? <Timetable data={this.filter(this.state.data)} /> : ''} {/*display table if data is present otherwise display nothing*/}\n            </div>\n        );\n    }\n}\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}